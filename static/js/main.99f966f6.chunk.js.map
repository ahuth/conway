{"version":3,"sources":["components/Block.tsx","utils/cell.ts","utils/world.ts","components/Grid.tsx","reducer.ts","hooks/useSimulation.ts","hooks/useInterval.ts","index.ts","components/App.tsx"],"names":["Block","_ref","on","onClick","styles","useMemo","backgroundColor","border","getStyles","react_default","a","createElement","role","style","create","alive","arguments","length","undefined","randomize","world","size","Object","objectSpread","cells","map","Array","Cell","random","mapCells","callback","cell","index","step","_getCoordinatesForInd","x","y","Math","floor","getCoordinatesForIndex","getIndexForCooridinates","getNeighborsForIndex","reduce","acc","getNeighborhood","shouldLive","nextCell","toggleCell","slice","wrapAround","number","output","Grid","columns","display","gridTemplateColumns","concat","height","width","World","bind","key","ActionTypes","initialState","playing","reducer","state","action","type","clear","data","toggleStart","useSimulation","_useReducer","useReducer","_useReducer2","slicedToArray","dispatch","doClear","useCallback","doRandomize","doStep","doToggleCell","doToggleStart","delay","running","callbackRef","useRef","useEffect","current","id","setInterval","clearInterval","useInterval","ReactDOM","render","React","_useSimulation","document","getElementById"],"mappings":"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","file":"static/js/main.99f966f6.chunk.js","sourcesContent":["import React, { useMemo } from 'react';\n\ntype Props = {\n  on: boolean,\n  onClick: () => void,\n}\n\nexport default function Block({ on, onClick }: Props) {\n  const styles = useMemo(() => getStyles(on), [on]);\n  return <div onClick={onClick} role=\"button\" style={styles} />;\n}\n\nfunction getStyles(on: boolean) {\n  return {\n    backgroundColor: on ? 'whitesmoke' : 'black',\n    border: '1px solid rebeccapurple',\n  };\n}\n","interface Cell {\n  alive: 0 | 1;\n}\n\nexport type Type = Cell;\n\nexport function create(alive = false): Cell {\n  return {\n    alive: alive ? 1 : 0,\n  };\n}\n\nexport function toggle(cell: Cell): Cell {\n  return {\n    alive: cell.alive ? 0 : 1,\n  };\n}\n","import { map, random } from 'lodash';\nimport * as Cell from './cell';\n\ninterface World {\n  cells: Array<Cell.Type>,\n  size: number,\n}\n\nexport type Type = World;\n\n/**\n * Create a new, empty World.\n */\nexport function create(size: number): World {\n  return {\n    cells: map(new Array(size * size), () => Cell.create()),\n    size,\n  };\n}\n\n/**\n * Randomize the cells of a World. Returns a new World.\n */\nexport function randomize(world: World): World {\n  const { size } = world;\n  return {\n    ...world,\n    cells: map(new Array(size * size), () => Cell.create(!!random(1))),\n  };\n}\n\n/**\n * Execute a callback for every cell in a world, and return an array with the result of each.\n */\nexport function mapCells<T>(world: World, callback: (alive: boolean, index: number) => T) {\n  return world.cells.map((cell, index) => {\n    return callback(!!cell.alive, index);\n  });\n}\n\n/**\n * Return a new world with each cell in their \"next\" state.\n */\nexport function step(world: World): World {\n  return {\n    ...world,\n    cells: mapCells(world, (alive, index) => nextCell(world, alive, index)),\n  };\n}\n\n/**\n * Return a new world with a specific cell toggled.\n */\nexport function toggleCell(world: World, index: number): World {\n  const cells = world.cells.slice();\n  cells[index] = Cell.toggle(cells[index]);\n\n  return {\n    ...world,\n    cells,\n  };\n}\n\nfunction nextCell(world: World, alive: boolean, index: number): Cell.Type {\n  return Cell.create(shouldLive(world, alive, index));\n}\n\nfunction shouldLive(world: World, alive: boolean, index: number): boolean {\n  const liveNeibhbors = getNeighborhood(world, index);\n\n  switch (liveNeibhbors) {\n    case 0:\n    case 1:\n      return false;\n    case 2:\n      return alive;\n    case 3:\n      return true;\n    default:\n      return false;\n  }\n}\n\nfunction getNeighborhood(world: World, index: number): number {\n  return getNeighborsForIndex(world, index).reduce((acc, cell) => acc + cell.alive, 0);\n}\n\nfunction getNeighborsForIndex(world: World, index: number): Array<Cell.Type> {\n  const { x, y } = getCoordinatesForIndex(world, index);\n\n  return [\n    world.cells[getIndexForCooridinates(world, x - 1, y + 1)],\n    world.cells[getIndexForCooridinates(world, x, y + 1)],\n    world.cells[getIndexForCooridinates(world, x + 1, y + 1)],\n    world.cells[getIndexForCooridinates(world, x - 1, y)],\n    world.cells[getIndexForCooridinates(world, x + 1, y)],\n    world.cells[getIndexForCooridinates(world, x - 1, y - 1)],\n    world.cells[getIndexForCooridinates(world, x, y - 1)],\n    world.cells[getIndexForCooridinates(world, x + 1, y - 1)],\n  ];\n}\n\nfunction getCoordinatesForIndex(world: World, index: number): { x: number, y: number } {\n  return {\n    x: index % world.size,\n    y: Math.floor(index / world.size),\n  };\n}\n\nfunction getIndexForCooridinates(world: World, x: number, y: number): number {\n  return wrapAround(x, world.size) + wrapAround(y, world.size) * world.size;\n}\n\nfunction wrapAround(number: number, size: number): number {\n  let output = number;\n\n  if (output < 0) {\n    output = size - 1;\n  } else if (output >= size) {\n    output = 0;\n  }\n\n  return output;\n}\n","import React, { useMemo } from 'react';\nimport Block from './Block';\nimport * as World from '../utils/world';\n\ntype Props = {\n  onClick: (index: number) => void,\n  world: World.Type,\n}\n\nexport default function Grid({ onClick, world }: Props) {\n  const styles = useMemo(() => getStyles(world.size), [world.size])\n\n  return (\n    <div style={styles}>\n      {World.mapCells(world, (alive, index) => {\n        return <Block on={alive} onClick={onClick.bind(null, index)} key={`${index}-${alive}`} />;\n      })}\n    </div>\n  );\n}\n\nfunction getStyles(columns: number) {\n  return {\n    display: 'grid',\n    gridTemplateColumns: `repeat(${columns}, 1fr)`,\n    height: 600,\n    width: 600,\n  };\n}\n","import * as World from './utils/world';\n\nexport type Action = {\n  type: ActionTypes,\n  data?: any,\n}\n\nexport enum ActionTypes {\n  clear,\n  randomize,\n  step,\n  toggleCell,\n  toggleStart,\n}\n\nexport interface State {\n  world: World.Type,\n  playing: boolean,\n}\n\nexport const initialState = {\n  world: World.create(50),\n  playing: false,\n}\n\nexport default function reducer(state: State, action: Action) {\n  switch (action.type) {\n    case ActionTypes.clear:\n      return initialState;\n    case ActionTypes.randomize:\n      return {\n        world: World.randomize(state.world),\n        playing: false,\n      };\n    case ActionTypes.step:\n      return {\n        ...state,\n        world: World.step(state.world),\n      };\n    case ActionTypes.toggleCell:\n      return {\n        world: World.toggleCell(state.world, action.data),\n        playing: false,\n      };\n    case ActionTypes.toggleStart:\n      return {\n        ...state,\n        playing: !state.playing,\n      }\n    default:\n      return state;\n  }\n}\n","import { useCallback, useReducer } from 'react';\nimport reducer, { ActionTypes, initialState } from '../reducer';\nimport useInterval from './useInterval';\n\nexport default function useSimulation() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const doClear = useCallback(() => dispatch({ type: ActionTypes.clear }), []);\n  const doRandomize = useCallback(() => dispatch({ type: ActionTypes.randomize }), []);\n  const doStep = useCallback(() => dispatch({ type: ActionTypes.step }), []);\n  const doToggleCell = useCallback((index) => dispatch({ type: ActionTypes.toggleCell, data: index }), []);\n  const doToggleStart = useCallback(() => dispatch({ type: ActionTypes.toggleStart }), []);\n\n  useInterval(\n    () => dispatch({ type: ActionTypes.step }),\n    50,\n    state.playing,\n  );\n\n  return {\n    world: state.world,\n    playing: state.playing,\n    doClear,\n    doRandomize,\n    doStep,\n    doToggleCell,\n    doToggleStart,\n  };\n}\n","import { useEffect, useRef } from 'react';\n\nexport default function useInterval(callback: () => void, delay: number, running = true) {\n  const callbackRef = useRef(callback);\n\n  useEffect(() => {\n    callbackRef.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    if (running) {\n      const id = setInterval(callbackRef.current, delay);\n\n      return () => clearInterval(id);\n    }\n  }, [delay, callbackRef, running]);\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport './index.css';\n\nReactDOM.render(React.createElement(App), document.getElementById('root'));\n","import React from 'react';\nimport Grid from './Grid';\nimport useSimulation from '../hooks/useSimulation';\n\nexport default function App() {\n  const { world, playing, doClear, doRandomize, doStep, doToggleCell, doToggleStart } = useSimulation();\n\n  return (\n    <div>\n      <button onClick={doStep}>Step</button>\n      <button onClick={doToggleStart}>{playing ? 'Stop' : 'Play'}</button>\n      <button onClick={doClear}>Clear</button>\n      <button onClick={doRandomize}>Random</button>\n      <Grid onClick={doToggleCell} world={world} />\n    </div>\n  );\n}\n"],"sourceRoot":""}